<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Language Learning App - Cloud-Based Learning Platform</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
  <header>
    <div class="header-content">
      <h1>ğŸŒ Language Learning Platform</h1>
      <div class="header-actions">
        <div id="auth-status" class="auth-status"></div>
        <button id="logout-btn" class="btn btn-danger" style="display: none;">Logout</button>
      </div>
    </div>
  </header>

  <main>
    <!-- Welcome Section -->
    <section id="welcome" class="card welcome-card">
      <div class="welcome-content">
        <h2>ğŸŒŸ Welcome to Language Learning Platform!</h2>
        <p class="welcome-text">Your all-in-one platform for learning languages, managing tasks, and tracking your progress.</p>
        <div class="welcome-features">
          <div class="feature-item">ğŸ“š Build your vocabulary</div>
          <div class="feature-item">âœ… Manage learning tasks</div>
          <div class="feature-item">ğŸ“Š Track your progress</div>
          <div class="feature-item">ğŸ§© Test your knowledge</div>
        </div>
        <div class="welcome-actions">
          <h3>Do you have an account?</h3>
          <div class="button-group">
            <button id="has-account-btn" class="btn btn-primary btn-large">Yes, Sign In</button>
            <button id="no-account-btn" class="btn btn-secondary btn-large">No, Register</button>
          </div>
        </div>
      </div>
    </section>

    <!-- Login Section -->
    <section id="login-section" class="card" style="display: none;">
      <h2>ğŸ” Sign In</h2>
      <div class="auth-container">
        <div class="input-group">
          <input id="username" placeholder="Username" class="input-field">
          <div class="password-wrapper">
            <input id="password" type="password" placeholder="Password" class="input-field">
            <button type="button" class="password-toggle" id="toggle-password" aria-label="Show password">
              <span class="toggle-icon">ğŸ‘ï¸</span>
            </button>
          </div>
        </div>
        <div class="button-group">
          <button id="login-btn" class="btn btn-primary">Sign In</button>
          <button id="back-to-welcome-btn" class="btn btn-secondary">Back</button>
        </div>
        <div class="forgot-password-link">
          <a href="#" id="forgot-password-link" style="color: #667eea; text-decoration: none; font-size: 0.9rem;">Forgot your password?</a>
        </div>
        <div id="auth-message" class="message"></div>
      </div>
    </section>

    <!-- Forgot Password Section -->
    <section id="forgot-password-section" class="card" style="display: none;">
      <h2>ğŸ”‘ Reset Password</h2>
      <p class="section-description">Enter your username or email to reset your password.</p>
      <div class="auth-container">
        <div class="input-group">
          <input id="reset-username" placeholder="Username or Email" class="input-field">
        </div>
        <div class="button-group">
          <button id="request-reset-btn" class="btn btn-primary">Request Password Reset</button>
          <button id="back-to-login-btn" class="btn btn-secondary">Back to Login</button>
        </div>
        <div id="reset-message" class="message"></div>
      </div>
    </section>

    <!-- Reset Password Section -->
    <section id="reset-password-section" class="card" style="display: none;">
      <h2>ğŸ”‘ Set New Password</h2>
      <p class="section-description">Enter your new password below.</p>
      <div class="auth-container">
        <div class="input-group">
          <div class="password-wrapper">
            <input id="new-password" type="password" placeholder="New Password" class="input-field">
            <button type="button" class="password-toggle" id="toggle-new-password" aria-label="Show password">
              <span class="toggle-icon">ğŸ‘ï¸</span>
            </button>
          </div>
          <div class="password-wrapper">
            <input id="confirm-password" type="password" placeholder="Confirm New Password" class="input-field">
            <button type="button" class="password-toggle" id="toggle-confirm-password" aria-label="Show password">
              <span class="toggle-icon">ğŸ‘ï¸</span>
            </button>
          </div>
        </div>
        <div class="button-group">
          <button id="reset-password-btn" class="btn btn-primary">Reset Password</button>
          <button id="cancel-reset-btn" class="btn btn-secondary">Cancel</button>
        </div>
        <div id="reset-password-message" class="message"></div>
      </div>
    </section>

    <!-- Register Section -->
    <section id="register-section" class="card" style="display: none;">
      <h2>âœ¨ Create Account</h2>
      <div class="auth-container">
        <div class="input-group">
          <input id="reg-username" placeholder="Username" class="input-field">
          <input id="reg-email" placeholder="Email" class="input-field" type="email">
          <div class="password-wrapper">
            <input id="reg-password" type="password" placeholder="Password" class="input-field">
            <button type="button" class="password-toggle" id="toggle-reg-password" aria-label="Show password">
              <span class="toggle-icon">ğŸ‘ï¸</span>
            </button>
          </div>
        </div>
        <div class="button-group">
          <button id="register-btn" class="btn btn-primary">Create Account</button>
          <button id="back-to-welcome-reg-btn" class="btn btn-secondary">Back</button>
        </div>
        <div id="reg-message" class="message"></div>
      </div>
    </section>

    <!-- Language Selection Section (ALWAYS shown at top after login) -->
    <section id="language-selection" class="card" style="display: none;">
      <h2>ğŸŒ Choose Your Learning Language</h2>
      <p class="language-prompt">Select the language you want to learn. This will be used for vocabulary translations and learning activities. A basic starter activity will be created for you!</p>
      <div class="language-select-container">
        <select id="language-select" class="language-select">
          <option value="">-- Select a language to learn --</option>
          <option value="es">ğŸ‡ªğŸ‡¸ Spanish</option>
          <option value="fr">ğŸ‡«ğŸ‡· French</option>
          <option value="de">ğŸ‡©ğŸ‡ª German</option>
          <option value="it">ğŸ‡®ğŸ‡¹ Italian</option>
          <option value="pt">ğŸ‡µğŸ‡¹ Portuguese</option>
          <option value="ru">ğŸ‡·ğŸ‡º Russian</option>
          <option value="ja">ğŸ‡¯ğŸ‡µ Japanese</option>
          <option value="ko">ğŸ‡°ğŸ‡· Korean</option>
          <option value="zh">ğŸ‡¨ğŸ‡³ Chinese</option>
          <option value="ar">ğŸ‡¸ğŸ‡¦ Arabic</option>
          <option value="hi">ğŸ‡®ğŸ‡³ Hindi</option>
          <option value="nl">ğŸ‡³ğŸ‡± Dutch</option>
          <option value="sv">ğŸ‡¸ğŸ‡ª Swedish</option>
          <option value="pl">ğŸ‡µğŸ‡± Polish</option>
          <option value="tr">ğŸ‡¹ğŸ‡· Turkish</option>
          <option value="vi">ğŸ‡»ğŸ‡³ Vietnamese</option>
          <option value="th">ğŸ‡¹ğŸ‡­ Thai</option>
          <option value="he">ğŸ‡®ğŸ‡± Hebrew</option>
          <option value="cs">ğŸ‡¨ğŸ‡¿ Czech</option>
          <option value="ro">ğŸ‡·ğŸ‡´ Romanian</option>
          <option value="hu">ğŸ‡­ğŸ‡º Hungarian</option>
        </select>
        <button id="select-language-btn" class="btn btn-primary">Start Learning</button>
      </div>
      <div id="lang-message" class="message"></div>
    </section>

    <!-- Assignments Section (Learning - Top Priority, shown before dashboard) -->
    <section id="assignments" class="card" style="display: none;">
      <h2>ğŸ“ Language Assignments</h2>
      <p class="section-description">Practice your language skills with interactive exercises!</p>
      
      <div class="assignment-controls">
        <h3>Generate New Assignment</h3>
        <div class="assignment-type-buttons">
          <button class="btn btn-primary assignment-type-btn" data-type="basic" style="background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);">
            ğŸŒŸ Basic Starter
          </button>
          <button class="btn btn-primary assignment-type-btn" data-type="translation">
            ğŸ“ Translation Practice
          </button>
          <button class="btn btn-secondary assignment-type-btn" data-type="fill_blank">
            âœï¸ Fill in the Blank
          </button>
          <button class="btn btn-secondary assignment-type-btn" data-type="multiple_choice">
            âœ… Multiple Choice
          </button>
        </div>
      </div>

      <div id="assignments-list" class="assignments-list">
        <h3>Your Assignments</h3>
        <div id="assignments-container"></div>
      </div>

      <div id="assignment-viewer" class="assignment-viewer" style="display: none;">
        <h3 id="assignment-title"></h3>
        <p id="assignment-description"></p>
        <div id="assignment-questions"></div>
        <div class="button-group">
          <button id="submit-assignment-btn" class="btn btn-primary">Submit Assignment</button>
          <button id="cancel-assignment-btn" class="btn btn-secondary">Cancel</button>
        </div>
        <div id="assignment-result" class="message"></div>
      </div>
    </section>

    <!-- Vocabulary Section (Learning - Top Priority, shown after assignments) -->
    <section id="vocab" class="card" style="display: none;">
      <h2>ğŸ“š Vocabulary Builder</h2>
      <div id="current-language-display" class="current-language-badge"></div>
      <div class="form-row">
        <input id="vocab-word" placeholder="Enter a word to learn" class="input-field">
        <button id="vocab-add-btn" class="btn btn-primary">Translate & Save</button>
      </div>
      <div class="form-row">
        <button id="change-language-btn" class="btn btn-secondary">Change Learning Language</button>
      </div>
      <ul id="vocab-list" class="vocab-list"></ul>
    </section>

    <!-- Dashboard Section (shown when authenticated) -->
    <section id="dashboard" class="card" style="display: none;">
      <h2>ğŸ“Š Dashboard & Analytics</h2>
      <div class="dashboard-grid">
        <div class="stat-card">
          <h3>Tasks Summary</h3>
          <div class="stat-value" id="stat-tasks-total">0</div>
          <div class="stat-label">Total Tasks</div>
        </div>
        <div class="stat-card">
          <h3>Completed</h3>
          <div class="stat-value" id="stat-tasks-completed">0</div>
          <div class="stat-label">Tasks Done</div>
        </div>
        <div class="stat-card">
          <h3>Vocabulary</h3>
          <div class="stat-value" id="stat-vocab-total">0</div>
          <div class="stat-label">Words Learned</div>
        </div>
        <div class="stat-card">
          <h3>Languages</h3>
          <div class="stat-value" id="stat-languages">0</div>
          <div class="stat-label">Languages Studied</div>
        </div>
      </div>
      <div class="charts-container">
        <div class="chart-wrapper">
          <h3>Task Completion</h3>
          <canvas id="task-chart"></canvas>
        </div>
        <div class="chart-wrapper">
          <h3>Vocabulary by Language</h3>
          <canvas id="vocab-chart"></canvas>
        </div>
        <div class="chart-wrapper">
          <h3>Learning Progress (Last 30 Days)</h3>
          <canvas id="progress-chart"></canvas>
        </div>
      </div>
      <div id="upcoming-tasks" class="upcoming-section">
        <h3>ğŸ“… Upcoming Tasks</h3>
        <ul id="upcoming-list"></ul>
      </div>
    </section>

    <!-- Quiz Section (Learning - Top Priority) -->
    <section id="quiz" class="card" style="display: none;">
      <h2>ğŸ§© Vocabulary Quiz</h2>
      <button id="quiz-start-btn" class="btn btn-primary">Start Quiz</button>
      <div id="quiz-area" class="quiz-area"></div>
      <div id="quiz-result" class="quiz-result"></div>
    </section>

    <!-- Tasks Section (Management - Lower Priority) -->
    <section id="tasks" class="card" style="display: none;">
      <h2>âœ… Task Management</h2>
      <div class="form-row">
        <input id="task-name" placeholder="Task name" class="input-field">
        <input id="task-due" type="date" class="input-field">
        <button id="task-add-btn" class="btn btn-primary">Add Task</button>
      </div>
      <ul id="task-list" class="task-list"></ul>
    </section>
  </main>

  <footer>
    <p>Cloud-Based Language Learning Platform | Built with Flask & Chart.js</p>
  </footer>

  <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>

